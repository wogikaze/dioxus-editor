# アウトライナーの要件

## 用語

| 用語             | 説明                                                           |
| ---------------- | -------------------------------------------------------------- |
| アウトライナー   | 階層構造を持つテキストを編集するためのエディタ                 |
| インデントレベル | 行の階層を示す数値。0が最上位、1がその下、2...                 |
| インデントする   | 行のインデントレベルを上げること                               |
| デインデントする | 行のインデントレベルを下げること                               |
| キャレット       | テキストカーソルの位置を示すマーカー。例示では`\|`を使用       |
| バレット         | 行の先頭に表示される記号で、階層を示す。例示では`•`や`-`を使用 |

## インデント構造の表示

- 階層構造を表示できる
- indentの深さが1の次に3が来る使い方も許容する

## 折りたたみ

- インデントレベルが大きな行を折りたたみできる
  - クリックでもショートカットでも折りたためる
  - 折り畳みボタンは行番号の右側に、折りたたまれている場合は下向き三角、展開されている場合は右向き三角で表示
  - 折り畳みボタンは行番号の親要素がhover時に表示
- 現在行配下の全階層を一括で折りたためる

## 行の入れ替え

- ショートカットで行の入れ替えができる
- 子要素を含めた行の入れ替えも可能

## 記法

> 引用

<https://>から始まったらリンクになる

- クリックしたら開く
- [text]で"./text"への相対リンク
- カーソルが当たっている行だと`[text]`, 当たっていない行はtext(ハイパーリンク)と表示
  - クリックしたら開く
  - リンクの自動補完
- `[url]`でリンクになる
  - `[url text]`で表示テキストを変更できる
- `[- text]`で打ち消し線になる
- `[* text]`で太字になる
- `[/ text]`で斜体になる
- `[_ text]`で下線になる
- `[| text]`で中央寄せになる
- `[> text]`で右寄せになる
- `[# text]`で見出し1になる
- `[" text]`でインライン引用になる
- `[## text]`で見出し2になる
- `[### text]`で見出し3になる
- `[#### text]`で見出し4になる
- `[##### text]`で見出し5になる
- `[###### text]`で見出し6になる
- `[ ]`でチェックボックスになる
- `[x]`でチェック済みのチェックボックスになる
- `[imageurl]`で画像が表示される
  - クリックしたら拡大表示される
- `[youtubeurl]`でYouTube動画が埋め込まれる
  - クリックしたら再生される
- `[$ latex]`でLaTeX数式が表示される
  - 編集時は下側にプレビューが表示される
- ``text``でインラインコードになる
- `#text`でタグになる
  - タグの自動補完

### コードブロック

```txt
[```python main.py
def hello():
    print("Hello, world!")
```]
```

### テーブルブロック

```txt
[table scores
名前 | 数学 | 英語
太郎 | 80 | 90
花子 | 95 | 88
]
```

### LaTeXブロック

```txt
[$$
E = mc^2
$$]
```

## 入力補助

- `(`を入力したら`(|)`になる
- `{`を入力したら`{|}`になる
- `"`を入力したら`"|"`になる
- `「`を入力したら`「|」`になる
- `[`を入力したら`[|]`になる

## Undo/Redo

- Undo-tree方式でUndo/Redoができる

## ショートカット

### エディタのテキスト編集ショートカット

- Enter: インデントレベルを保ったまま改行
- left/up/down/right: カーソルを(一文字/一行)分移動
- home/end: 行頭/行末へカーソルを移動
- pgup/pgdn: 一画面分カーソルを上下に移動
- ctrl+(home/end): 一番上/下へカーソルを移動
- ctrl+z: undo
- ctrl+shift+z: redo
- ctrl+v: クリップボードの内容を貼り付け
- Shift+(left/up/down/right): 選択範囲を広げる
- ctrl+Shift+(left/right): 単語単位選択
- ctrl+a: 全選択
- ctrl+f: 検索窓を開く
  - esc: 検索窓を閉じる(開いている場合)
- esc: 選択範囲を解除(選択範囲がある場合)
- delete: 1文字削除
- ctrl+shift+p: 全コマンド検索・実行

#### 選択範囲があるとき

- ctrl+x: 切り取り
- ctrl+c: コピー
- backspace: 削除
- enter: 削除して改行

### アウトライナー用のショートカット

- ctrl+(up/down): 行を一段(上/下)に移動
- alt+(up/down): 兄弟要素を、子要素を保持したまま(上/下)に移動
- ctrl+(left/right): インデントレベルを(下げる/上げる)
- ctrl+enter: 行の折りたたみ/展開
- shift+enter: 新しい行のインデントレベルが0の改行
- tab: インデントレベルを上げる
- shift+tab: インデントレベルを下げる
- alt+(left/right): カーソルが存在する現在ノードから親ノードへ移動/最初の子ノードへ移動
- ctrl+[number]: 指定した階層のノードより浅い行のみを表示するようにすべて折りたたみ
- ctrl+shift+a: すべての行を折りたたむ/展開
- shift+alt+(up/down): 行を(上/下)に複製

#### 行頭

- space: インデントレベルを上げる
  - spaceは全角でも半角でも同じ動き
- backspace: インデントレベルを下げる

#### 選択範囲があるとき&アウトライナー用のショートカット

- ctrl+left/right: 選択範囲のインデントを変える
- tab/shift+tab: 選択範囲のインデントを変える
