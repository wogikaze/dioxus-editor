# 10-shortcuts-ime-and-edge-cases: ショートカット総仕上げと IME/エッジケース対応

## ゴール

- ショートカット一覧の実装漏れを埋める。
- IME、折りたたみ中編集、巨大データなど E-xxx 系のエッジケースを確認し、クラッシュしない状態にする。

## 手順

1. 全ショートカットの網羅
   - 仕様書とテスト仕様書のショートカット一覧を見ながら、現時点の実装との差分を洗い出す。
   - `Ctrl+F`, `Ctrl+Shift+P`, `Alt+Left/Right`, `Ctrl+[number]`, 複数行インデントなどを実装。

2. IME 対応 (E-401〜E-404)
   - `compositionstart` / `compositionend` イベントを使用して「IME 変換中フラグ」を管理。
   - 変換中は Enter/Tab/ショートカットを効かせないようにする。

3. 折りたたみと編集の競合 (E-201〜E-207)
   - 折りたたんだ状態での削除・切り取り・検索・Enter などを検証し、テスト仕様通りに動作するように調整。

4. 選択範囲とクリップボード (E-501〜E-505)
   - ブロックをまたいだ選択削除でブロック構造が壊れないようにする。
   - 複数階層のインデント一括変更が期待通りになることを確認。

5. パフォーマンスチェック (E-801〜E-803)
   - 5000 行程度の Document を生成し、スクロールや折りたたみ操作の体感パフォーマンスを確認。
   - 必要であれば、レンダリングを仮想リスト化する等の検討メモを残す（このステップでは必須ではない）。

## Definition of Done

- テスト仕様書の E セクションの代表的なケースについて、ブラウザ上で動作確認済み。
- 明らかなクラッシュやフリーズがなく、開発を進められる状態になっている。
